<!DOCTYPE html>
<html>
  <head>
    <title>MicroKanren Evaluator</title>

    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <script type="text/javascript" src="js/jquery.js"></script>
    <script type="text/javascript" src="js/bootstrap.min.js"></script>
    <script type="text/javascript" src="js/Main.js"></script>
    <script type="text/javascript">
      $(function() {
        PS.Main.main();
      });
    </script> 

    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/bootstrap.min.css" />
    <link rel="stylesheet" href="css/bootstrap-theme.min.css" />
    <link rel="stylesheet" href="css/font-awesome.min.css" />
  </head>
  <body>
    <div class="container-fluid">
      <div class="row">
        <div class="col-xs-4">
          <h2>mu-kanren</h2>
          
          <p>A step-by-step evaluator for a dialect of <a href="https://github.com/jasonhemann/microKanren">microKanren</a>.</p>
             
          <div id="subst" class="panel panel-default">
            <div class="panel-heading">Substitution</div>

            <table class="table">
              <thead>
                <th>Unknown</th>
                <th>Term</th>
              </thead>
              <tbody>
              </tbody>
            </table>
          </div>   
          
          <div id="stack" class="panel panel-default">
            <div class="panel-heading">Remaining Goals</div>

            <table class="table">
              <tbody>
              </tbody>
            </table>
          </div>
          
          <div>
              <small>Made by <a href="http://twitter.com/paf31">@paf31</a> using <a href="http://purescript.org">PureScript</a>.</small>
          </div>
        </div>
        <div class="col-xs-7">
          <ul class="nav nav-pills">
            <li role="presentation">
              <a href="#" id="evalButton"><span class="fa fa-play"></span> Run</a>
            </li>  
            <li role="presentation">
              <a href="#" id="editButton"><span class="fa fa-edit"></span> Edit</a>
            </li>  
            <li role="presentation">
              <a href="#" id="undoButton"><span class="fa fa-undo"></span> Undo</a>
            </li>
            <li role="presentation">
              <a href="#" data-toggle="modal" data-target="#help">
                <span class="fa fa-question"></span> Help
              </a>
            </li>
          </ul>  
            
          <div id="goal">
	        <h3>Current Goal</h3>
            <div class="lines"></div>
          </div>
          
          <div id="editor">
	        <h3>Edit Goal</h3>
            <textarea class="form-control" rows="20">(fresh xs ys 
  (appendo xs ys (a (b (c nil))))
)</textarea>
          </div>  
            
          <div id="error">
          </div>
        </div>
      </div>
    </div>
    
    <div class="modal fade" id="help" tabindex="-1" role="dialog" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            <h4 class="modal-title">Help</h4>
          </div>
          <div class="modal-body">
            <h4>Overview</h4>  
              
            <p>This application is a step-by-step evaluator for a dialect of <a href="https://github.com/jasonhemann/microKanren">microKanren</a>.</p>   
              
            <p>Programs define <em>goals</em>, and execution finds solutions to those goals if solutions exist. Run the program by clicking the <strong>Run</strong> button at the top of the page.</p>
            
            <p>The execution path is chosen by clicking on <em>subgoals</em> of the current goal. Possible paths are highlighted, and can be clicked to continue execution.</p>
              
            <h4>Terms</h4>
            
            <p>The language consists of two types of terms:</p>
            
            <ul>
              <li>Symbols, such as <code>a</code>, <code>b</code>, <code>c</code>, and <code>nil</code>.</li>
              <li>Pairs, such as <code>(a b)</code>.</li>
            </ul>
            
            <p>Pairs can be nested to generate more interesting terms, such as <code>(a (b (c nil)))</code>.</p>
            
            <p>During evaluation, terms may also contain <em>unknowns</em>, indicated by a hash symbol: <code>#1</code>, <code>#2</code>, etc.</p>
            
            <h4>Goals</h4>
            
            <p>There are three basic types of goals - equality, conjunctions and disjunctions:</p>
            
            <h5>Equality</h5>
            
            <p>An equality goal asserts that two terms should be equal. Here is an example:</p>
            
            <pre><code>(= x (y z))</code></pre>
            
            <p>This goal asserts that the term <code>x</code> is equal to the pair <code>(y z)</code>.</p>
             
            <p>If the current goal is an equality, then it can be clicked, and this will expand the current substitution.</p>
            
            <h5>Conjunctions</h5>
            
            <p>A conjunction asserts that two or more goals are satisfied simultaneously. A conjunction is introduced using the <code>conj</code> keyword. Here is an example:</p>
            
            <pre><code>(conj (= x a)
      (= y b)
)</code></pre>

            <p>This goal asserts that <code>x</code> equals <code>a</code>, and also that <code>y</code> equals <code>b</code>.</p>
            
            <p>If the current goal is a conjunction, any of the subgoals can be clicked. Execution will proceed for the selected subgoal and the remaining subgoals will be added to the list of <em>remaining goals</em>. When execution of the current goal completes, the first remaining goal will be executed.</p>
            
            <h5>Disjunctions</h5>
            
            <p>A disjunction asserts that at least one of a set of goals is satisfied. A disjunction is introduced using the <code>disj</code> keyword. Here is an example:</p>
            
            <pre><code>(disj (= x a)
      (= x b)
      (= x c)
)</code></pre>

            <p>This goal asserts that <code>x</code> is either equals to <code>a</code>, <code>b</code> or <code>c</code>.</p>
            
            <p>If the current goal is a disjunction, any of the subgoals can be clicked. Execution will proceed only for the selected subgoal.</p>
            
            <h4>Fresh Names</h4>
            
            <p>To generate fresh names, use the <code>fresh</code> keyword with one or more names, and a goal as the last argument:</p>
            
            <pre><code>(fresh x y z (= x (y z)))</code></pre>
            
            <p>This goal generates three fresh names, and asserts that <code>x</code> is equal to the pair <code>(y z)</code>. Execution will try to find terms <code>x</code>, <code>y</code> and <code>z</code> such that this relation holds.</p>
          </div>
          <div class="modal-footer">
            <a type="button" class="btn btn-default" data-dismiss="modal">Close</a>
          </div>
        </div>
      </div>
    </div>
    
    <a href="https://github.com/paf31/mu-kanren">
      <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/a6677b08c955af8400f44c6298f40e7d19cc5b2d/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f677261795f3664366436642e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png">
    </a>
  </body>
</html>
